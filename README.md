# CSL 2025 ä¸­è¶…è”èµ›æ•°æ®åˆ†æé¡¹ç›®

## ğŸ“Š é¡¹ç›®æ¦‚è¿°

è¿™æ˜¯ä¸€ä¸ªå®Œæ•´çš„ä¸­è¶…è”èµ›ï¼ˆCSLï¼‰2025èµ›å­£æ•°æ®åˆ†æé¡¹ç›®ï¼ŒåŒ…å«æ•°æ®çˆ¬å–ã€æ¸…æ´—ã€å¤„ç†å’Œäº‘ç«¯å­˜å‚¨çš„å®Œæ•´æµç¨‹ã€‚é¡¹ç›®æ¶µç›–äº†æ¯”èµ›æ•°æ®ã€çƒé˜Ÿè¡¨ç°ã€çƒå‘˜ç»Ÿè®¡ç­‰å¤šä¸ªç»´åº¦çš„æ•°æ®åˆ†æå’Œå¯è§†åŒ–ã€‚

## ğŸ¯ ä¸»è¦åŠŸèƒ½

### ğŸ” æ•°æ®çˆ¬å–
- **Transfermarktçˆ¬è™«**: è‡ªåŠ¨çˆ¬å–ä¸­è¶…è”èµ›æ¯”èµ›æ•°æ®
- **å¤šç‰ˆæœ¬çˆ¬è™«**: æä¾›ä¸åŒå¤æ‚åº¦çš„çˆ¬è™«ç‰ˆæœ¬
- **æ•°æ®éªŒè¯**: è‡ªåŠ¨éªŒè¯çˆ¬å–æ•°æ®çš„å®Œæ•´æ€§

### ğŸ§¹ æ•°æ®æ¸…æ´—
- **æ™ºèƒ½æ•°æ®æ¸…ç†**: è‡ªåŠ¨å¤„ç†ç¼ºå¤±å€¼ã€é‡å¤æ•°æ®
- **æ ¼å¼æ ‡å‡†åŒ–**: ç»Ÿä¸€æ•°æ®æ ¼å¼å’Œç¼–ç 
- **æ•°æ®æ˜ å°„**: è‡ªåŠ¨åŒ¹é…çƒå‘˜ã€çƒé˜Ÿã€ä½ç½®ä¿¡æ¯

### ğŸ“ˆ æ•°æ®åˆ†æ
- **çƒå‘˜è¡¨ç°åˆ†æ**: è¯¦ç»†çš„çƒå‘˜ç»Ÿè®¡æ•°æ®
- **çƒé˜Ÿè¡¨ç°åˆ†æ**: çƒé˜Ÿæ•´ä½“è¡¨ç°æŒ‡æ ‡
- **æ¯”èµ›æ•°æ®åˆ†æ**: æ¯”èµ›ç»“æœå’Œç»Ÿè®¡ä¿¡æ¯

### â˜ï¸ äº‘ç«¯å­˜å‚¨
- **Supabaseé›†æˆ**: è‡ªåŠ¨ä¸Šä¼ æ•°æ®åˆ°äº‘ç«¯æ•°æ®åº“
- **æ‰¹é‡å¤„ç†**: æ”¯æŒå¤§æ•°æ®é‡çš„æ‰¹é‡ä¸Šä¼ 
- **å®æ—¶åŒæ­¥**: æ•°æ®æ›´æ–°å®æ—¶åŒæ­¥åˆ°äº‘ç«¯

## ğŸ“ é¡¹ç›®ç»“æ„

```
2025 CSL/
â”œâ”€â”€ ğŸ“Š æ•°æ®æ–‡ä»¶
â”‚   â”œâ”€â”€ csl_2025_matches_complete.csv      # å®Œæ•´æ¯”èµ›æ•°æ®
â”‚   â”œâ”€â”€ team_list.csv                      # çƒé˜Ÿä¿¡æ¯
â”‚   â”œâ”€â”€ soccer_positions_table.csv         # çƒå‘˜ä½ç½®æ˜ å°„
â”‚   â”œâ”€â”€ player performance/                # çƒå‘˜è¡¨ç°æ•°æ®
â”‚   â”‚   â”œâ”€â”€ player_stats_2025.csv          # æœ¬èµ›å­£çƒå‘˜è¡¨ç°æ•°æ®ï¼ˆSupabaseä½¿ç”¨ï¼‰
â”‚   â”‚   â””â”€â”€ [å„çƒå‘˜ä¸ªäººæ•°æ®æ–‡ä»¶]
â”‚   â”œâ”€â”€ team stat/                         # çƒé˜Ÿç»Ÿè®¡æ•°æ®
â”‚   â””â”€â”€ team player/                       # çƒé˜Ÿçƒå‘˜ä¿¡æ¯
â”‚
â”œâ”€â”€ ğŸ•·ï¸ çˆ¬è™«è„šæœ¬
â”‚   â”œâ”€â”€ csl_2024_final_crawler.py          # æœ€ç»ˆç‰ˆçˆ¬è™«
â”‚   â”œâ”€â”€ csl_2024_direct_crawler.py         # ç›´æ¥çˆ¬è™«
â”‚   â”œâ”€â”€ csl_2024_precise_crawler.py        # ç²¾ç¡®çˆ¬è™«
â”‚   â””â”€â”€ transfermarkt_crawlers/            # çˆ¬è™«å·¥å…·é›†
â”‚
â”œâ”€â”€ ğŸ§¹ æ•°æ®æ¸…æ´—è„šæœ¬
â”‚   â”œâ”€â”€ clean_player_stats_improved.py     # æ”¹è¿›ç‰ˆæ•°æ®æ¸…æ´—
â”‚   â”œâ”€â”€ clean_player_stats_simple.py       # ç®€åŒ–ç‰ˆæ•°æ®æ¸…æ´—
â”‚   â”œâ”€â”€ final_cleanup.py                   # æœ€ç»ˆæ¸…ç†è„šæœ¬
â”‚   â””â”€â”€ map_positions.py                   # ä½ç½®æ˜ å°„è„šæœ¬
â”‚
â”œâ”€â”€ â˜ï¸ äº‘ç«¯ä¸Šä¼ 
â”‚   â”œâ”€â”€ supabase_uploader.py              # Supabaseä¸Šä¼ å™¨
â”‚   â”œâ”€â”€ setup_supabase.py                 # Supabaseè®¾ç½®
â”‚   â”œâ”€â”€ test_upload.py                    # ä¸Šä¼ æµ‹è¯•
â”‚   â””â”€â”€ quick_start.py                    # å¿«é€Ÿå¼€å§‹è„šæœ¬
â”‚
â”œâ”€â”€ ğŸ—„ï¸ æ•°æ®åº“
â”‚   â”œâ”€â”€ create_tables.sql                 # æ•°æ®åº“è¡¨ç»“æ„
â”‚   â””â”€â”€ config_example.py                 # é…ç½®æ–‡ä»¶ç¤ºä¾‹
â”‚
â””â”€â”€ ğŸ“š æ–‡æ¡£
    â”œâ”€â”€ README.md                         # é¡¹ç›®è¯´æ˜ï¼ˆæœ¬æ–‡ä»¶ï¼‰
    â”œâ”€â”€ README_Supabase.md               # Supabaseè¯¦ç»†æ–‡æ¡£
    â””â”€â”€ ä½¿ç”¨è¯´æ˜.md                       # ä¸­æ–‡ä½¿ç”¨è¯´æ˜
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. ç¯å¢ƒå‡†å¤‡

ç¡®ä¿æ‚¨å·²å®‰è£…Python 3.8+ï¼Œç„¶åå®‰è£…ä¾èµ–ï¼š

```bash
pip install -r requirements.txt
```

### 2. ä¸€é”®å¯åŠ¨ï¼ˆæ¨èï¼‰

è¿è¡Œå¿«é€Ÿå¼€å§‹è„šæœ¬ï¼Œè‡ªåŠ¨å®Œæˆæ‰€æœ‰è®¾ç½®ï¼š

```bash
python quick_start.py
```

è¿™å°†è‡ªåŠ¨å®Œæˆï¼š
- âœ… å®‰è£…ä¾èµ–åŒ…
- âœ… éªŒè¯æ•°æ®æ–‡ä»¶
- âœ… é…ç½®Supabaseè¿æ¥
- âœ… ä¸Šä¼ æ‰€æœ‰æ•°æ®

### 3. æ‰‹åŠ¨è®¾ç½®ï¼ˆé«˜çº§ç”¨æˆ·ï¼‰

#### æ­¥éª¤1: æ•°æ®éªŒè¯
```bash
python test_upload.py
```

#### æ­¥éª¤2: Supabaseé…ç½®
```bash
python setup_supabase.py
```

#### æ­¥éª¤3: å¼€å§‹ä¸Šä¼ 
```bash
python supabase_uploader.py
```

## ğŸ“Š æ•°æ®è¯´æ˜

### æ¯”èµ›æ•°æ® (Matches)
- **æ–‡ä»¶**: `csl_2025_matches_complete.csv`
- **å†…å®¹**: æ¯”èµ›æ—¥æœŸã€ä¸»å®¢é˜Ÿã€æ¯”åˆ†ã€çŠ¶æ€ç­‰
- **è®°å½•æ•°**: 200+ åœºæ¯”èµ›

### çƒé˜Ÿæ•°æ® (Teams)
- **æ–‡ä»¶**: `team_list.csv`
- **å†…å®¹**: çƒé˜ŸIDã€çƒé˜Ÿåç§°
- **çƒé˜Ÿæ•°**: 16æ”¯ä¸­è¶…çƒé˜Ÿ

### çƒå‘˜è¡¨ç°æ•°æ® (Player Performance)
- **æ–‡ä»¶**: `player performance/player_stats_2025.csv`
- **å†…å®¹**: å•èµ›å­£çƒå‘˜æ¯”èµ›ç»Ÿè®¡ï¼ˆçº¦ 1,125 æ¡ï¼‰
- **æŒ‡æ ‡**: 70+ ä¸ªç»Ÿè®¡æŒ‡æ ‡ï¼ˆä¸æ•°æ®åº“å­—æ®µä¸€ä¸€å¯¹åº”ï¼‰

### çƒé˜Ÿè¡¨ç°æ•°æ® (Team Performance)
- **æ–‡ä»¶**: `team stat/League_Team_Performance.csv`
- **å†…å®¹**: çƒé˜Ÿæ•´ä½“è¡¨ç°æŒ‡æ ‡
- **æŒ‡æ ‡**: æ§çƒç‡ã€ä¼ çƒæˆåŠŸç‡ã€å°„é—¨ç­‰

## ğŸ› ï¸ æŠ€æœ¯æ ˆ

### åç«¯æŠ€æœ¯
- **Python 3.8+**: ä¸»è¦å¼€å‘è¯­è¨€
- **Pandas**: æ•°æ®å¤„ç†å’Œåˆ†æ
- **Requests**: HTTPè¯·æ±‚å¤„ç†
- **BeautifulSoup**: HTMLè§£æ

### æ•°æ®åº“
- **Supabase**: äº‘ç«¯PostgreSQLæ•°æ®åº“
- **SQL**: æ•°æ®æŸ¥è¯¢å’Œç®¡ç†

### å·¥å…·åº“
- **tqdm**: è¿›åº¦æ¡æ˜¾ç¤º
- **colorama**: å½©è‰²ç»ˆç«¯è¾“å‡º
- **python-dotenv**: ç¯å¢ƒå˜é‡ç®¡ç†

## ğŸ“ˆ æ•°æ®æµç¨‹

```mermaid
graph TD
    A[Transfermarktç½‘ç«™] --> B[çˆ¬è™«è„šæœ¬]
    B --> C[åŸå§‹æ•°æ®CSV]
    C --> D[æ•°æ®æ¸…æ´—è„šæœ¬]
    D --> E[æ¸…æ´—åæ•°æ®]
    E --> F[æ•°æ®æ˜ å°„]
    F --> G[æœ€ç»ˆæ•°æ®æ–‡ä»¶]
    G --> H[Supabaseä¸Šä¼ å™¨]
    H --> I[äº‘ç«¯æ•°æ®åº“]
    I --> J[æ•°æ®åˆ†æ/å¯è§†åŒ–]
```

## ğŸ”§ é…ç½®è¯´æ˜

### Supabaseé…ç½®
åˆ›å»º `config.py` æ–‡ä»¶ï¼š

```python
SUPABASE_CONFIG = {
    'url': 'https://your-project.supabase.co',
    'service_role_key': 'your-service-role-key'
}

UPLOAD_CONFIG = {
    'batch_size': 1000,
    'max_retries': 3,
    'timeout': 30,
    'log_level': 'INFO'
}
```

### æ•°æ®æ–‡ä»¶æ˜ å°„
```python
DATA_FILES = {
    'positions': 'soccer_positions_table.csv',
    'teams': 'team_list.csv',
    'matches': 'csl_2025_matches_complete.csv',
    'team_performance': 'team stat/League_Team_Performance.csv',
    'player_performance': 'player performance/player_stats_2025.csv'
}
```

## ğŸ“Š æ•°æ®åº“è¡¨ç»“æ„

### ä¸»è¦æ•°æ®è¡¨
1. **teams** - çƒé˜Ÿä¿¡æ¯è¡¨
2. **matches** - æ¯”èµ›æ•°æ®è¡¨
3. **positions** - çƒå‘˜ä½ç½®è¡¨
4. **team_performance** - çƒé˜Ÿè¡¨ç°è¡¨
5. **player_performance** - çƒå‘˜è¡¨ç°è¡¨

### è¡¨å…³ç³»
- `matches` â†’ `teams` (å¤–é”®å…³è”)
- `team_performance` â†’ `matches`, `teams`
- `player_performance` â†’ `matches`, `positions`

## ğŸ” ä½¿ç”¨ç¤ºä¾‹

### æ•°æ®çˆ¬å–
```python
from csl_2024_final_crawler import CSL2024FinalCrawler

crawler = CSL2024FinalCrawler()
matches = crawler.crawl_all_matches()
```

### æ•°æ®æ¸…æ´—
```python
from clean_player_stats_improved import clean_player_stats

cleaned_data = clean_player_stats('raw_data.csv')
```

### æ•°æ®ä¸Šä¼ 
```python
from supabase_uploader import SupabaseUploader

uploader = SupabaseUploader()
uploader.upload_all_data()
```

#### å…³äºåˆ—åæ˜ å°„
åŸå§‹CSVä¸­åŒ…å«å¦‚ "Minutes played"ã€"Pass Accurate"ã€"Saves / with reflexes" ç­‰å«ç©ºæ ¼/å¤§å°å†™çš„åˆ—åã€‚ä¸Šä¼ å™¨ä¼šè‡ªåŠ¨æ˜ å°„ä¸ºä¸‹åˆ’çº¿å‘½åï¼ˆå¦‚ `minutes_played`ã€`pass_accurate`ã€`saves_with_reflexes`ï¼‰ï¼Œä¸ Supabase è¡¨ç»“æ„ä¸€è‡´ï¼Œæ— éœ€æ‰‹å·¥æ”¹åˆ—åã€‚

## ğŸ¯ ä¸»è¦ç‰¹æ€§

### âœ¨ è‡ªåŠ¨åŒ–å¤„ç†
- **ä¸€é”®éƒ¨ç½²**: å¿«é€Ÿå¼€å§‹è„šæœ¬è‡ªåŠ¨å®Œæˆæ‰€æœ‰è®¾ç½®
- **æ™ºèƒ½é‡è¯•**: ç½‘ç»œå¼‚å¸¸è‡ªåŠ¨æ¢å¤
- **æ‰¹é‡å¤„ç†**: å¤§æ–‡ä»¶è‡ªåŠ¨åˆ†æ‰¹ä¸Šä¼ 

### ğŸ›¡ï¸ æ•°æ®å®‰å…¨
- **æ•°æ®éªŒè¯**: ä¸Šä¼ å‰è‡ªåŠ¨éªŒè¯æ•°æ®å®Œæ•´æ€§
- **é”™è¯¯å¤„ç†**: å®Œå–„çš„å¼‚å¸¸å¤„ç†æœºåˆ¶
- **æ—¥å¿—è®°å½•**: è¯¦ç»†çš„æ“ä½œæ—¥å¿—

### ğŸ“ˆ æ€§èƒ½ä¼˜åŒ–
- **å†…å­˜ä¼˜åŒ–**: å¤§æ–‡ä»¶æµå¼å¤„ç†
- **å¹¶å‘æ§åˆ¶**: åˆç†çš„è¯·æ±‚é¢‘ç‡æ§åˆ¶
- **ç¼“å­˜æœºåˆ¶**: é¿å…é‡å¤å¤„ç†

## ğŸ”§ æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

**1. ä¾èµ–å®‰è£…å¤±è´¥**
```bash
# è§£å†³æ–¹æ¡ˆ
pip install --upgrade pip
pip install -r requirements.txt
```

**2. Supabaseè¿æ¥å¤±è´¥**
- æ£€æŸ¥URLå’ŒKeyæ˜¯å¦æ­£ç¡®
- ç¡®è®¤æ•°æ®åº“è¡¨å·²åˆ›å»º
- æ£€æŸ¥ç½‘ç»œè¿æ¥

**3. æ•°æ®ä¸Šä¼ å¤±è´¥**
- æŸ¥çœ‹ `logs/` ç›®å½•ä¸‹çš„æ—¥å¿—æ–‡ä»¶
- æ£€æŸ¥CSVæ–‡ä»¶æ ¼å¼æ˜¯å¦æ­£ç¡®
- éªŒè¯æ•°æ®æ–‡ä»¶æ˜¯å¦å­˜åœ¨

**4. çˆ¬è™«è¢«é˜»æ­¢**
- è°ƒæ•´è¯·æ±‚é¢‘ç‡
- æ›´æ¢User-Agent
- ä½¿ç”¨ä»£ç†æœåŠ¡å™¨

### æ—¥å¿—æ–‡ä»¶
- ä½ç½®: `logs/upload_YYYYMMDD_HHMMSS.log`
- å†…å®¹: è¯¦ç»†çš„æ“ä½œè®°å½•å’Œé”™è¯¯ä¿¡æ¯

## ğŸ“š æ‰©å±•åŠŸèƒ½

### æ•°æ®åˆ†æ
- çƒå‘˜è¡¨ç°è¶‹åŠ¿åˆ†æ
- çƒé˜Ÿå®åŠ›å¯¹æ¯”
- æ¯”èµ›é¢„æµ‹æ¨¡å‹

### å¯è§†åŒ–
- Power BIæŠ¥è¡¨ (`New folder/GK Analysis.pbix`)
- æ•°æ®ä»ªè¡¨æ¿
- äº¤äº’å¼å›¾è¡¨

### APIæ¥å£
- RESTful APIè®¾è®¡
- å®æ—¶æ•°æ®æŸ¥è¯¢
- æ•°æ®å¯¼å‡ºåŠŸèƒ½

## ğŸ¤ è´¡çŒ®æŒ‡å—

æ¬¢è¿æäº¤é—®é¢˜å’Œæ”¹è¿›å»ºè®®ï¼

### å¼€å‘ç¯å¢ƒè®¾ç½®
1. Forké¡¹ç›®
2. åˆ›å»ºåŠŸèƒ½åˆ†æ”¯
3. æäº¤æ›´æ”¹
4. åˆ›å»ºPull Request

### ä»£ç è§„èŒƒ
- ä½¿ç”¨Python PEP 8è§„èŒƒ
- æ·»åŠ é€‚å½“çš„æ³¨é‡Šå’Œæ–‡æ¡£
- ç¼–å†™å•å…ƒæµ‹è¯•

## ğŸ“„ è®¸å¯è¯

MIT License - è¯¦è§ [LICENSE](LICENSE) æ–‡ä»¶

## ğŸ“ è”ç³»æ–¹å¼

å¦‚æœ‰é—®é¢˜æˆ–å»ºè®®ï¼Œè¯·é€šè¿‡ä»¥ä¸‹æ–¹å¼è”ç³»ï¼š
- åˆ›å»ºIssue
- å‘é€é‚®ä»¶
- æäº¤Pull Request

---

**ğŸ‰ å¼€å§‹ä½¿ç”¨ï¼šè¿è¡Œ `python quick_start.py` ä¸€é”®å®Œæˆæ‰€æœ‰è®¾ç½®ï¼**

**ğŸ“– è¯¦ç»†æ–‡æ¡£ï¼šæŸ¥çœ‹ `README_Supabase.md` å’Œ `ä½¿ç”¨è¯´æ˜.md` è·å–æ›´å¤šä¿¡æ¯**

